@model SCG.ARS.BOI.WEB.ViewModels.UploadViewModel
@{
    ViewData["Title"] = "";
    Layout = null;
}

<style>
    .table-condensed{
        width: 100%;
    }
    .table > tbody > tr > td {
        vertical-align: middle;
    }
    input {
        vertical-align: middle;
    }
    .datepicker{
        width: 340px;
        height: 250px;
    }
</style>

<!-- Main content -->
<section class="content container-fluid">

    <div class="row">
        <div class="col-sm-4">
                <div id="dtPickerUpload" class="form-group input-group date">
                    <input type="text" class="form-control" data-inputmask="'alias': 'M - yyyy'" data-mask>
                    <div class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </div>
                </div>
        </div>
        <!-- middle col -->
        <div class="col-sm-4">

                <div class="form-group">
                    @* @Html.DropDownListFor(x => Model.BankCodeList, new SelectList(Model.BankCodeList, "DataValueKey", "DataDisplay"), htmlAttributes: new { @class = "form-control select2", id = "bankCode"}) *@
                </div>

        </div>
        <!-- /.col -->
        <!-- right col -->
        <div class="col-sm-4">
                <div class="form-group">
                    @* @Html.DropDownListFor(x => Model.BankStatementGroupCodeList, new SelectList(Model.BankStatementGroupCodeList, "DataValueKey", "DataDisplay"), htmlAttributes: new { @class = "form-control select2", id = "fileTypeCode"}) *@
                </div>        
        </div> 
        <!-- /.col -->
    </div>
    <!-- /.row (main row) -->
    <!-- row upload content -->
    <div class="form-group row">
        <div class="col-lg-12">
            <div class="jumbotron" data-bind="dropUpload: filesuploaded">
            <h3>Drop Area</h3>
            <p >
                <b>Information:</b>

                You can drag and drop files here or double click on the area to upload your files.
                
            </p>
            @*<input type="file" class="hidden" />*@
            </div>

            <div>
                <b>List Of files</b>
                <ul class="list-group" data-bind="foreach:filesuploaded">
                    <li class="list-group-item">
                        @* <b>&nbsp</b> *@
                        @* <div class="pull-left mr-3"> *@
                            <b data-bind="text:name"></b>
                        @* </div> *@
                        <i class="glyphicon glyphicon-trash pull-right" style="cursor:pointer" data-bind="click:$parent.deleteSelectedFile"></i>
                        <div class="row-md-12">
                            <div data-bind="attr: { id: 'progress_' + $index() }" class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 0%; float:none;">
                            <span></span>
                            </div>
                        </div>                  

                    </li>
                </ul>
            </div>

            <div>
                <button class="btn btn-primary" data-bind="click:save"><i class="glyphicon glyphicon-upload" style="padding-right:10px"></i>Upload</button>
            </div>
@* <div class="progress progress-info progress-striped">
                            <div class="progress-bar" data-bind="style: { width: uploadPercentage }"></div>
                        </div> *@
            @* <div class="progress">
                <div id="progress" class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                <span class="sr-only">0% Complete (success)</span>
                </div>
            </div> *@
        </div>
        @* <div class="col-lg-4">
            <form id="form" name="form" action="/Import/UploadFiles" enctype="multipart/form-data" method="post">
            <div class="buttons">
                <div class="upload-button">
                <div class="label">Click me!</div>
                <input id="files" name="files" type="file" accept=".zip, .dat, .txt" size="1" multiple onchange="uploadFiles('files');" />
                </div>
            </div>
            </form>
        </div> *@
    </div>
    <!-- /. row upload content -->
</section>
<!-- /.content -->

<!-- jQuery 3 -->
@* <script src="bower_components/jquery/dist/jquery.min.js"></script> *@
<!-- jQuery UI 1.11.4 -->
@* <script src="bower_components/jquery-ui/jquery-ui.min.js"></script> *@
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  //$.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
@* <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script> *@
<!-- Morris.js charts -->
@* <script src="bower_components/raphael/raphael.min.js"></script>
<script src="bower_components/morris.js/morris.min.js"></script> *@
<!-- Sparkline -->
@* <script src="bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script> *@
<!-- jvectormap -->
@* <script src="plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script> *@
@* <script src="plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script> *@
<!-- jQuery Knob Chart -->
@* <script src="bower_components/jquery-knob/dist/jquery.knob.min.js"></script> *@
<!-- daterangepicker -->
@* <script src="bower_components/moment/min/moment.min.js"></script> *@
@* <script src="bower_components/bootstrap-daterangepicker/daterangepicker.js"></script> *@
<!-- datepicker -->
@* <script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script> *@
<!-- Bootstrap WYSIHTML5 -->
@* <script src="plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script> *@
<!-- Slimscroll -->
@* <script src="bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script> *@
<!-- FastClick -->
@* <script src="bower_components/fastclick/lib/fastclick.js"></script> *@
<!-- AdminLTE App -->
@* <script src="dist/js/adminlte.min.js"></script> *@
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
@* <script src="dist/js/pages/dashboard.js"></script> *@
<!-- AdminLTE for demo purposes -->
@* <script src="dist/js/demo.js"></script> *@
    
    <script src="~/js/index-vm.js"></script>
    
<script>
    //$('[data-mask]').inputmask();

    $('#dtPickerUpload').datepicker({
        autoclose: true,
        minViewMode: 1,
        format: 'M - yyyy',
    }).on('changeDate', function(selected){
      // startDate = new Date(selected.date.valueOf());
      // startDate.setDate(startDate.getDate(new Date(selected.date.valueOf())));
      // $('.to').datepicker('setStartDate', startDate);
    }).on('focusout', function (evt){
        var date = $(this).datepicker('getDate');
        if(date == null)
            $(this).datepicker('setDate', new Date());
    });

    $(document).ready(function(){
        $('#dtPickerUpload').datepicker('setDate', new Date());
    });

    $('#calendar').datepicker({minViewMode: 1});

    $(document).ready(function(){
        $('#calendar').datepicker('setDate', new Date());
    });

    function genUploadPanel(chkValue){
        console.log(chkValue);
    }

    function uploadFiles(inputId) {
        var input = document.getElementById(inputId);
        var files = input.files;
        var formData = new FormData();

        for (var i = 0; i != files.length; i++) {
            console.log(files[i]);
            formData.append("files", files[i]);
        }

        $.ajax(
            {
            url: "/Import/UploadFiles",
            data: formData,
            processData: false,
            contentType: false,
            type: "POST",
            success: function (data) {
                alert("Files Uploaded!");
            }
            }
        );
    }
</script>